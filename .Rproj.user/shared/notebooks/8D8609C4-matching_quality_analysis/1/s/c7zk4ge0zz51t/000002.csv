"0","## Data preparation "
"0","cost_data <- read.csv('../data/cost_data.csv')"
"0","non_dkd <- read.csv('../data/non_dkd.csv')"
"0","cost_data <- cost_data[,5:length(cost_data)]"
"0","y <- cost_data[,1]"
"0","z <- cost_data$DKD"
"0","micro <- cost_data$Mircro.有无"
"0","micro_number <- cost_data$Mircro.数量"
"0","DR <- cost_data$DR"
"0","DPN <- cost_data$DPN"
"0","ESRD <- cost_data$ESRD "
"0","days <- cost_data$实际住院.天."
"0","sex <- cost_data$性别"
"0","age <- cost_data$年龄"
"0","sex <- (sex == '男')"
"0","select_comp = colnames(cost_data) != '糖尿病性肾病.肾小球硬化症.'"
"0","cost_data = cost_data[, select_comp]"
"0","xs <- cost_data[,32:length(cost_data)]"
"0","complications = (xs == 'True')"
"0","pop_non_dkd = read.csv('../data/popular_non_dkd.csv')"
"0","non_dkd_d <- (non_dkd == 'True')"
"0","non_dkd_d <- non_dkd_d[, 2:length(non_dkd_d[1,])]"
"0","pop_non_dkd_d <- (pop_non_dkd == 'True')"
"0","pop_non_dkd_d <- pop_non_dkd_d[, 2:length(pop_non_dkd_d[1,])]"
"0","year <- cost_data$住院时间"
"0","FactoredVariable = factor(year) "
"0","dumm = as.data.frame(model.matrix(~FactoredVariable)[,-1])"
"0","mat <- cbind(y, z, year,age, micro, micro_number, DR, DPN, days, ESRD, sex, xs)"
"0","pscoreDKD<- predict(glm(z ~ age + sex + year + days, "
"0","data = mat, family = ""binomial""), type=""response"")"
"0","mat$ps = pscoreDKD"
